<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flux-schnell-prod - Waverless</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        .back-link { color: #6b7280; text-decoration: none; font-size: 13px; display: flex; align-items: center; gap: 6px; }
        .back-link:hover { color: #1da1f2; }
        .endpoint-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
        .endpoint-title { display: flex; align-items: center; gap: 12px; }
        .endpoint-title h2 { font-size: 22px; font-weight: 600; color: #1f2937; }
        .endpoint-meta { font-size: 13px; color: #6b7280; margin-top: 4px; }
        .endpoint-actions { display: flex; gap: 8px; }
        .tabs { display: flex; gap: 0; border-bottom: 1px solid #e5e7eb; margin-bottom: 20px; }
        .tab { padding: 12px 20px; font-size: 14px; color: #6b7280; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab:hover { color: #1da1f2; }
        .tab.active { color: #1da1f2; border-bottom-color: #1da1f2; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .mini-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
        .mini-stat { background: #fff; border-radius: 8px; padding: 14px 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .mini-stat-label { font-size: 11px; color: #6b7280; text-transform: uppercase; }
        .mini-stat-value { font-size: 20px; font-weight: 600; color: #1f2937; margin-top: 2px; }
        .mini-stat-sub { font-size: 11px; color: #9ca3af; }
        .worker-card { background: #fff; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 12px; display: flex; align-items: center; gap: 16px; }
        .worker-icon { width: 40px; height: 40px; border-radius: 8px; background: rgba(72,187,120,0.1); color: #48bb78; display: flex; align-items: center; justify-content: center; }
        .worker-icon.idle { background: rgba(245,158,11,0.1); color: #f59e0b; }
        .worker-info { flex: 1; }
        .worker-name { font-size: 14px; font-weight: 500; color: #1f2937; }
        .worker-meta { font-size: 12px; color: #6b7280; }
        .worker-stats { display: flex; gap: 24px; text-align: right; }
        .worker-stat-value { font-size: 14px; font-weight: 500; color: #1f2937; }
        .worker-stat-label { font-size: 11px; color: #9ca3af; }
        .config-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .config-item { padding: 12px 16px; background: #f9fafb; border-radius: 6px; }
        .config-label { font-size: 12px; color: #6b7280; }
        .config-value { font-size: 14px; font-weight: 500; color: #1f2937; margin-top: 2px; }
        /* Info Table */
        .info-table { width: 100%; border-collapse: collapse; }
        .info-table td { padding: 12px 16px; border-bottom: 1px solid #f3f4f6; font-size: 13px; }
        .info-table tr:last-child td { border-bottom: none; }
        .info-table .info-label { color: #6b7280; width: 180px; background: #f9fafb; font-weight: 500; }
        /* API Buttons */
        .api-btn.active { background: #1da1f2; color: #fff; border-color: #1da1f2; }
        .code-tab { font-size: 12px; color: #6b7280; cursor: pointer; padding: 4px 8px; border-radius: 4px; }
        .code-tab:hover { color: #1da1f2; }
        .code-tab.active { background: #1da1f2; color: #fff; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo"><i class="fas fa-bolt"></i><span>Waverless</span></div>
        <nav class="nav-menu">
            <a href="index.html" class="nav-item"><i class="fas fa-th-large"></i><span>Dashboard</span></a>
            <a href="serverless.html" class="nav-item"><i class="fas fa-rocket"></i><span>Serverless</span></a>
            <a href="endpoints.html" class="nav-item active"><i class="fas fa-server"></i><span>Endpoints</span></a>
            <a href="tasks.html" class="nav-item"><i class="fas fa-tasks"></i><span>Tasks</span></a>
            <a href="metrics.html" class="nav-item"><i class="fas fa-microchip"></i><span>Metrics</span></a>
        </nav>
    </div>

    <div class="main-content">
        <header class="header">
            <a href="endpoints.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Endpoints</a>
            <div class="user-info"><div class="user-avatar">A</div><span>Admin</span></div>
        </header>

        <div class="content">
            <div class="endpoint-header">
                <div>
                    <div class="endpoint-title">
                        <h2>flux-schnell-prod</h2>
                        <span class="tag running">Running</span>
                    </div>
                    <div class="endpoint-meta">RTX 4090 24GB • Created Jan 5, 2026 • ID: ep_abc123def456</div>
                </div>
                <div class="endpoint-actions">
                    <button class="btn btn-outline"><i class="fas fa-edit"></i> Edit</button>
                    <button class="btn btn-outline"><i class="fas fa-stop"></i> Stop</button>
                    <button class="btn btn-outline" style="color:#f56565;border-color:#f56565;"><i class="fas fa-trash"></i> Delete</button>
                </div>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="showTab('overview')">Overview</div>
                <div class="tab" onclick="showTab('metrics')">Metrics</div>
                <div class="tab" onclick="showTab('workers')">Workers</div>
                <div class="tab" onclick="showTab('tasks')">Tasks</div>
                <div class="tab" onclick="showTab('logs')">Logs</div>
                <div class="tab" onclick="showTab('settings')">Settings</div>
            </div>

            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <!-- Quick Start Panel -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3><i class="fas fa-bolt" style="color:#f59e0b;margin-right:8px;"></i>Quick Start</h3></div>
                    <div style="padding: 16px;">
                        <div style="display:flex;gap:12px;margin-bottom:16px;">
                            <button class="btn btn-primary api-btn active" onclick="setApiMethod('run')">Async (run)</button>
                            <button class="btn btn-outline api-btn" onclick="setApiMethod('runsync')">Sync (runsync)</button>
                            <button class="btn btn-outline api-btn" onclick="setApiMethod('status')">Status</button>
                        </div>
                        <div id="apiPanel">
                            <div class="form-group" style="margin-bottom:12px;">
                                <label class="form-label">Input JSON</label>
                                <textarea class="form-input" id="inputJson" rows="3" style="font-family:monospace;font-size:12px;">{"prompt": "a beautiful sunset"}</textarea>
                            </div>
                            <button class="btn btn-primary" onclick="submitTask()"><i class="fas fa-play"></i> Submit Task</button>
                        </div>
                        <div id="statusPanel" style="display:none;">
                            <div class="form-group" style="margin-bottom:12px;">
                                <label class="form-label">Task ID</label>
                                <input type="text" class="form-input" id="taskIdInput" placeholder="Enter task ID">
                            </div>
                            <button class="btn btn-primary" onclick="queryStatus()"><i class="fas fa-search"></i> Query Status</button>
                        </div>
                        <div id="responsePanel" style="display:none;margin-top:16px;">
                            <label class="form-label">Response</label>
                            <pre style="background:#1f2937;color:#e5e7eb;padding:12px;border-radius:6px;font-size:12px;overflow:auto;max-height:150px;" id="responseJson"></pre>
                        </div>
                        <div style="margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb;">
                            <div style="display:flex;gap:12px;margin-bottom:8px;">
                                <span class="code-tab active" onclick="showCode('curl')">cURL</span>
                                <span class="code-tab" onclick="showCode('python')">Python</span>
                                <span class="code-tab" onclick="showCode('js')">JavaScript</span>
                            </div>
                            <pre style="background:#f9fafb;padding:12px;border-radius:6px;font-size:11px;overflow:auto;" id="codeExample"></pre>
                            <button class="btn btn-outline" style="margin-top:8px;font-size:12px;" onclick="copyCode()"><i class="fas fa-copy"></i> Copy</button>
                        </div>
                    </div>
                </div>

                <!-- Basic Information -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3>Basic Information</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr><td class="info-label">Endpoint Name</td><td colspan="3">flux-schnell-prod</td></tr>
                            <tr><td class="info-label">Display Name</td><td colspan="3">Flux Schnell Production</td></tr>
                            <tr><td class="info-label">Description</td><td colspan="3">High-performance image generation endpoint</td></tr>
                            <tr>
                                <td class="info-label">Namespace</td><td>default</td>
                                <td class="info-label">Type</td><td>GPU</td>
                            </tr>
                            <tr>
                                <td class="info-label">Spec</td><td>RTX 4090 24GB</td>
                                <td class="info-label">Task Timeout</td><td>3600s</td>
                            </tr>
                            <tr>
                                <td class="info-label">Max Pending Tasks</td><td>100</td>
                                <td class="info-label">Created At</td><td>2026-01-05 10:30:00</td>
                            </tr>
                            <tr>
                                <td class="info-label">Last Scale Time</td><td>2026-01-06 10:15:00</td>
                                <td class="info-label">Last Task Time</td><td>2026-01-06 10:42:35</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Image Information -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header">
                        <h3>Image Information</h3>
                        <button class="btn btn-outline" style="font-size:12px;"><i class="fas fa-sync"></i> Check Image</button>
                    </div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr>
                                <td class="info-label">Image</td>
                                <td colspan="3"><code style="background:#f3f4f6;padding:4px 8px;border-radius:4px;font-size:11px;">registry.example.com/flux-schnell:v1.2.3</code></td>
                            </tr>
                            <tr>
                                <td class="info-label">Update Status</td>
                                <td colspan="3">
                                    <span class="tag success"><i class="fas fa-check"></i> Image is up to date</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="info-label">Image Digest</td><td><code style="font-size:11px;">sha256:abc123...</code></td>
                                <td class="info-label">Last Checked</td><td>2026-01-06 09:00:00</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Resource Configuration -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3>Resource Configuration</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr>
                                <td class="info-label">Replicas</td><td>8 / 10 <span style="color:#6b7280;font-size:11px;">(80%)</span></td>
                                <td class="info-label">Available Replicas</td><td>8</td>
                            </tr>
                            <tr>
                                <td class="info-label">Shared Memory Size</td><td>16Gi</td>
                                <td class="info-label">Ptrace Debugging</td><td><span class="tag" style="background:rgba(107,114,128,0.1);color:#6b7280;">Disabled</span></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- AutoScaler Configuration -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3>AutoScaler Configuration</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr>
                                <td class="info-label">AutoScaler Override</td>
                                <td colspan="3"><span class="tag" style="background:rgba(72,187,120,0.1);color:#48bb78;"><i class="fas fa-check"></i> Force On</span></td>
                            </tr>
                            <tr>
                                <td class="info-label">Priority</td><td>50</td>
                                <td class="info-label">Min Replicas</td><td>1 <span style="color:#6b7280;font-size:11px;">(scale-to-zero disabled)</span></td>
                            </tr>
                            <tr>
                                <td class="info-label">Max Replicas</td><td>10</td>
                                <td class="info-label">Scale Up Threshold</td><td>1</td>
                            </tr>
                            <tr>
                                <td class="info-label">Scale Down Idle Time</td><td>300s</td>
                                <td class="info-label">Scale Up Cooldown</td><td>60s</td>
                            </tr>
                            <tr>
                                <td class="info-label">Scale Down Cooldown</td><td>120s</td>
                                <td class="info-label">Dynamic Priority</td><td><span class="tag" style="background:rgba(29,161,242,0.1);color:#1da1f2;">Enabled</span></td>
                            </tr>
                            <tr>
                                <td class="info-label">High Load Threshold</td><td>50</td>
                                <td class="info-label">Priority Boost</td><td>10</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Task Statistics -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3>Task Statistics</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr>
                                <td class="info-label">Total Tasks</td><td><strong>54,717</strong></td>
                                <td class="info-label">Completed Tasks</td><td><span class="tag success">54,678</span></td>
                            </tr>
                            <tr>
                                <td class="info-label">Failed Tasks</td><td><span class="tag failed">39</span></td>
                                <td class="info-label">Pending Tasks</td><td><span class="tag pending">23</span></td>
                            </tr>
                            <tr>
                                <td class="info-label">Running Tasks</td><td><span class="tag running">8</span></td>
                                <td class="info-label">Worker Count</td><td>8 / 10 (Active / Total)</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Volume Mounts -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header"><h3>Volume Mounts</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr>
                                <td class="info-label">Mount 1</td>
                                <td colspan="3">PVC: <code>model-cache-pvc</code> → Path: <code>/models</code></td>
                            </tr>
                            <tr>
                                <td class="info-label">Mount 2</td>
                                <td colspan="3">PVC: <code>output-pvc</code> → Path: <code>/output</code></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Environment Variables -->
                <div class="card">
                    <div class="card-header"><h3>Environment Variables</h3></div>
                    <div style="padding: 0;">
                        <table class="info-table">
                            <tr><td class="info-label">MODEL_PATH</td><td colspan="3"><code>/models/flux-schnell</code></td></tr>
                            <tr><td class="info-label">CUDA_VISIBLE_DEVICES</td><td colspan="3"><code>0</code></td></tr>
                            <tr><td class="info-label">MAX_BATCH_SIZE</td><td colspan="3"><code>4</code></td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Metrics Tab -->
            <div id="metrics" class="tab-content">
                <div class="mini-stats">
                    <div class="mini-stat"><div class="mini-stat-label">Total Requests</div><div class="mini-stat-value">54,717</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Execution Time</div><div class="mini-stat-value">4d 2h</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Cold Starts</div><div class="mini-stat-value">1,245</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">GPU Utilization</div><div class="mini-stat-value">85.2%</div></div>
                </div>
                <div class="charts-row">
                    <div class="card">
                        <div class="card-header"><h3>Requests</h3></div>
                        <div class="chart-container" id="requestsChart"></div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3>Execution Time</h3></div>
                        <div class="chart-container" id="execTimeChart"></div>
                    </div>
                </div>
                <div class="charts-row">
                    <div class="card">
                        <div class="card-header"><h3>Worker Count</h3></div>
                        <div class="chart-container" id="workerCountChart"></div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3>GPU Utilization</h3></div>
                        <div class="chart-container" id="gpuChart"></div>
                    </div>
                </div>
            </div>

            <!-- Workers Tab -->
            <div id="workers" class="tab-content">
                <div class="mini-stats">
                    <div class="mini-stat"><div class="mini-stat-label">Active</div><div class="mini-stat-value" style="color:#48bb78;">6</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Idle</div><div class="mini-stat-value" style="color:#f59e0b;">2</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Avg Uptime</div><div class="mini-stat-value">4.2h</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Total Tasks</div><div class="mini-stat-value">12,456</div></div>
                </div>
                <div class="worker-card">
                    <div class="worker-icon"><i class="fas fa-server"></i></div>
                    <div class="worker-info"><div class="worker-name">worker-8a2b3c4d</div><div class="worker-meta">Started 5.2h ago • GPU: 87% • Mem: 72%</div></div>
                    <div class="worker-stats">
                        <div><div class="worker-stat-value">1,856</div><div class="worker-stat-label">Tasks</div></div>
                        <div><div class="worker-stat-value">8.2s</div><div class="worker-stat-label">Avg Time</div></div>
                    </div>
                    <span class="tag running">Active</span>
                </div>
                <div class="worker-card">
                    <div class="worker-icon"><i class="fas fa-server"></i></div>
                    <div class="worker-info"><div class="worker-name">worker-5e6f7g8h</div><div class="worker-meta">Started 4.8h ago • GPU: 92% • Mem: 85%</div></div>
                    <div class="worker-stats">
                        <div><div class="worker-stat-value">1,723</div><div class="worker-stat-label">Tasks</div></div>
                        <div><div class="worker-stat-value">7.9s</div><div class="worker-stat-label">Avg Time</div></div>
                    </div>
                    <span class="tag running">Active</span>
                </div>
                <div class="worker-card">
                    <div class="worker-icon idle"><i class="fas fa-server"></i></div>
                    <div class="worker-info"><div class="worker-name">worker-9i0j1k2l</div><div class="worker-meta">Started 2.1h ago • GPU: 0% • Mem: 15%</div></div>
                    <div class="worker-stats">
                        <div><div class="worker-stat-value">456</div><div class="worker-stat-label">Tasks</div></div>
                        <div><div class="worker-stat-value">9.1s</div><div class="worker-stat-label">Avg Time</div></div>
                    </div>
                    <span class="tag pending">Idle</span>
                </div>
                <div class="worker-card">
                    <div class="worker-icon"><i class="fas fa-server"></i></div>
                    <div class="worker-info"><div class="worker-name">worker-3m4n5o6p</div><div class="worker-meta">Started 3.5h ago • GPU: 78% • Mem: 68%</div></div>
                    <div class="worker-stats">
                        <div><div class="worker-stat-value">1,245</div><div class="worker-stat-label">Tasks</div></div>
                        <div><div class="worker-stat-value">8.5s</div><div class="worker-stat-label">Avg Time</div></div>
                    </div>
                    <span class="tag running">Active</span>
                </div>
            </div>

            <!-- Tasks Tab -->
            <div id="tasks" class="tab-content">
                <div class="mini-stats">
                    <div class="mini-stat"><div class="mini-stat-label">Pending</div><div class="mini-stat-value">23</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">In Progress</div><div class="mini-stat-value">8</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Completed</div><div class="mini-stat-value">12,386</div></div>
                    <div class="mini-stat"><div class="mini-stat-label">Failed</div><div class="mini-stat-value">39</div></div>
                </div>
                <div class="filters" style="margin-bottom: 16px;">
                    <input type="text" class="search-input" placeholder="Search Task ID...">
                    <select class="filter-select"><option>All Status</option><option>Pending</option><option>In Progress</option><option>Completed</option><option>Failed</option></select>
                </div>
                <div class="card">
                    <div class="table-container">
                        <table>
                            <thead><tr><th>Task ID</th><th>Status</th><th>Worker</th><th>Exec Time</th><th>Created</th></tr></thead>
                            <tbody>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_abc123</code></td><td><span class="tag running">In Progress</span></td><td>worker-8a2b</td><td>2.3s</td><td>2s ago</td></tr>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_def456</code></td><td><span class="tag running">In Progress</span></td><td>worker-5e6f</td><td>1.8s</td><td>5s ago</td></tr>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_ghi789</code></td><td><span class="tag success">Completed</span></td><td>worker-8a2b</td><td>8.7s</td><td>12s ago</td></tr>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_jkl012</code></td><td><span class="tag success">Completed</span></td><td>worker-3m4n</td><td>9.2s</td><td>18s ago</td></tr>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_mno345</code></td><td><span class="tag failed">Failed</span></td><td>worker-5e6f</td><td>12.4s</td><td>25s ago</td></tr>
                                <tr><td><code style="background:#f3f4f6;padding:2px 6px;border-radius:4px;">task_pqr678</code></td><td><span class="tag pending">Pending</span></td><td>-</td><td>-</td><td>30s ago</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Logs Tab -->
            <div id="logs" class="tab-content">
                <div class="filters" style="margin-bottom: 16px;">
                    <select class="filter-select"><option>All Levels</option><option>INFO</option><option>WARN</option><option>ERROR</option></select>
                    <select class="filter-select"><option>All Workers</option><option>worker-8a2b</option><option>worker-5e6f</option></select>
                </div>
                <div class="card" style="background:#1f2937;color:#e5e7eb;font-family:monospace;font-size:12px;padding:16px;max-height:400px;overflow:auto;">
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:42</span> <span style="color:#48bb78;">[INFO]</span> worker-8a2b Task task_abc123 started</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:40</span> <span style="color:#48bb78;">[INFO]</span> worker-5e6f Task task_def456 started</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:38</span> <span style="color:#48bb78;">[INFO]</span> worker-8a2b Task task_ghi789 completed in 8.7s</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:35</span> <span style="color:#f59e0b;">[WARN]</span> worker-9i0j Entering idle state</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:30</span> <span style="color:#f56565;">[ERROR]</span> worker-5e6f Task task_mno345 failed: CUDA out of memory</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:28</span> <span style="color:#48bb78;">[INFO]</span> worker-3m4n Task task_jkl012 completed in 9.2s</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:25</span> <span style="color:#48bb78;">[INFO]</span> Autoscaler: scaling up to 8 workers</div>
                    <div style="margin-bottom:4px;"><span style="color:#6b7280;">10:35:20</span> <span style="color:#48bb78;">[INFO]</span> worker-8a2b GPU utilization: 87%</div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="card" style="padding: 20px;">
                    <h3 style="font-size:15px;font-weight:600;margin-bottom:16px;">Worker Configuration</h3>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Min Workers</label><input type="number" class="form-input" value="1"></div>
                        <div class="form-group"><label class="form-label">Max Workers</label><input type="number" class="form-input" value="10"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Idle Timeout (s)</label><input type="number" class="form-input" value="60"></div>
                        <div class="form-group"><label class="form-label">Max Concurrency</label><input type="number" class="form-input" value="1"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Queue Timeout (s)</label><input type="number" class="form-input" value="120"></div>
                        <div class="form-group"><label class="form-label">GPUs / Worker</label><select class="form-select"><option>1</option><option>2</option></select></div>
                    </div>
                    <button class="btn btn-primary" style="margin-top:16px;">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentApiMethod = 'run';
        let currentCodeLang = 'curl';
        const endpoint = 'flux-schnell-prod';
        const apiUrl = 'http://localhost:8080';

        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
            if (tabId === 'metrics') initMetricsCharts();
        }

        function setApiMethod(method) {
            currentApiMethod = method;
            document.querySelectorAll('.api-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('apiPanel').style.display = method === 'status' ? 'none' : 'block';
            document.getElementById('statusPanel').style.display = method === 'status' ? 'block' : 'none';
            updateCodeExample();
        }

        function showCode(lang) {
            currentCodeLang = lang;
            document.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            updateCodeExample();
        }

        function updateCodeExample() {
            const input = document.getElementById('inputJson')?.value || '{"prompt": "a beautiful sunset"}';
            const taskId = document.getElementById('taskIdInput')?.value || 'YOUR_TASK_ID';
            let code = '';

            if (currentCodeLang === 'curl') {
                if (currentApiMethod === 'status') {
                    code = `curl -X GET ${apiUrl}/v1/status/${taskId}`;
                } else {
                    code = `curl -X POST ${apiUrl}/v1/${endpoint}/${currentApiMethod} \\
  -H "Content-Type: application/json" \\
  -d '{"input": ${input}}'`;
                }
            } else if (currentCodeLang === 'python') {
                if (currentApiMethod === 'status') {
                    code = `import requests

response = requests.get("${apiUrl}/v1/status/${taskId}")
print(response.json())`;
                } else {
                    code = `import requests

response = requests.post(
    "${apiUrl}/v1/${endpoint}/${currentApiMethod}",
    json={"input": ${input}}
)
print(response.json())`;
                }
            } else {
                if (currentApiMethod === 'status') {
                    code = `const response = await fetch("${apiUrl}/v1/status/${taskId}");
const result = await response.json();
console.log(result);`;
                } else {
                    code = `const response = await fetch("${apiUrl}/v1/${endpoint}/${currentApiMethod}", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ input: ${input} })
});
const result = await response.json();
console.log(result);`;
                }
            }
            document.getElementById('codeExample').textContent = code;
        }

        function submitTask() {
            const response = { id: "task_" + Math.random().toString(36).substr(2, 9), status: "IN_QUEUE" };
            document.getElementById('responseJson').textContent = JSON.stringify(response, null, 2);
            document.getElementById('responsePanel').style.display = 'block';
            document.getElementById('taskIdInput').value = response.id;
        }

        function queryStatus() {
            const response = { id: document.getElementById('taskIdInput').value, status: "COMPLETED", output: { image_url: "https://..." } };
            document.getElementById('responseJson').textContent = JSON.stringify(response, null, 2);
            document.getElementById('responsePanel').style.display = 'block';
        }

        function copyCode() {
            navigator.clipboard.writeText(document.getElementById('codeExample').textContent);
            alert('Copied!');
        }

        // Initialize
        updateCodeExample();

        // Charts
        const hours = Array.from({length:24}, (_,i) => `${i}:00`);

        function initMetricsCharts() {
            const requestsChart = echarts.init(document.getElementById('requestsChart'));
            requestsChart.setOption({
                grid: { left: 50, right: 20, top: 20, bottom: 30 },
                tooltip: { trigger: 'axis' },
                xAxis: { type: 'category', data: hours, axisLabel: { color: '#6b7280' } },
                yAxis: { type: 'value', axisLabel: { color: '#6b7280' } },
                series: [
                    { name: 'Completed', type: 'bar', stack: 'a', data: Array.from({length:24}, () => 450 + Math.random()*150), itemStyle: { color: '#48bb78' } },
                    { name: 'Failed', type: 'bar', stack: 'a', data: Array.from({length:24}, () => Math.random()*5), itemStyle: { color: '#f56565' } }
                ]
            });

            const execTimeChart = echarts.init(document.getElementById('execTimeChart'));
            execTimeChart.setOption({
                grid: { left: 50, right: 20, top: 20, bottom: 30 },
                tooltip: { trigger: 'axis' },
                xAxis: { type: 'category', data: hours, axisLabel: { color: '#6b7280' } },
                yAxis: { type: 'value', axisLabel: { color: '#6b7280', formatter: '{value}s' } },
                series: [
                    { name: 'P50', type: 'line', data: Array.from({length:24}, () => 7 + Math.random()*3), smooth: true, symbol: 'none', lineStyle: { color: '#1da1f2' } },
                    { name: 'P95', type: 'line', data: Array.from({length:24}, () => 12 + Math.random()*5), smooth: true, symbol: 'none', lineStyle: { color: '#f56565', type: 'dashed' } }
                ]
            });

            const workerCountChart = echarts.init(document.getElementById('workerCountChart'));
            workerCountChart.setOption({
                grid: { left: 50, right: 20, top: 20, bottom: 30 },
                tooltip: { trigger: 'axis' },
                xAxis: { type: 'category', data: hours, axisLabel: { color: '#6b7280' } },
                yAxis: { type: 'value', axisLabel: { color: '#6b7280' } },
                series: [
                    { name: 'Active', type: 'line', stack: 'a', data: Array.from({length:24}, () => 5 + Math.random()*3), smooth: true, symbol: 'none', areaStyle: { color: '#1da1f2' } },
                    { name: 'Idle', type: 'line', stack: 'a', data: Array.from({length:24}, () => 1 + Math.random()*2), smooth: true, symbol: 'none', areaStyle: { color: '#94a3b8' } }
                ]
            });

            const gpuChart = echarts.init(document.getElementById('gpuChart'));
            gpuChart.setOption({
                grid: { left: 50, right: 20, top: 20, bottom: 30 },
                tooltip: { trigger: 'axis' },
                xAxis: { type: 'category', data: hours, axisLabel: { color: '#6b7280' } },
                yAxis: { type: 'value', max: 100, axisLabel: { color: '#6b7280', formatter: '{value}%' } },
                series: [{ type: 'line', data: Array.from({length:24}, () => 70 + Math.random()*25), smooth: true, symbol: 'none', lineStyle: { color: '#8b5cf6' }, areaStyle: { color: 'rgba(139,92,246,0.1)' } }]
            });
        }
    </script>
</body>
</html>
