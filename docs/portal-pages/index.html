<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waverless Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
    <div class="sidebar">
        <div class="logo"><i class="fas fa-bolt"></i><span>Waverless</span></div>
        <nav class="nav-menu">
            <a href="index.html" class="nav-item active"><i class="fas fa-th-large"></i><span>Dashboard</span></a>
            <a href="serverless.html" class="nav-item"><i class="fas fa-rocket"></i><span>Serverless</span></a>
            <a href="endpoints.html" class="nav-item"><i class="fas fa-server"></i><span>Endpoints</span></a>
            <a href="tasks.html" class="nav-item"><i class="fas fa-tasks"></i><span>Tasks</span></a>
            <a href="metrics.html" class="nav-item"><i class="fas fa-microchip"></i><span>Metrics</span></a>
        </nav>
    </div>

    <div class="main-content">
        <header class="header">
            <h1 class="page-title">Dashboard</h1>
            <div class="user-info"><div class="user-avatar">A</div><span>Admin</span></div>
        </header>

        <div class="content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue"><i class="fas fa-server"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Total Endpoints</div>
                        <div class="stat-value">24</div>
                        <div class="stat-change positive"><i class="fas fa-arrow-up"></i> +3 today</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green"><i class="fas fa-users"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Active Workers</div>
                        <div class="stat-value">156</div>
                        <div class="stat-change positive"><i class="fas fa-arrow-up"></i> +12</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple"><i class="fas fa-tasks"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Tasks (24h)</div>
                        <div class="stat-value">54,717</div>
                        <div class="stat-change positive"><i class="fas fa-arrow-up"></i> +2.3k</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon orange"><i class="fas fa-microchip"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">GPU Utilization</div>
                        <div class="stat-value">82.4%</div>
                        <div class="stat-change positive"><i class="fas fa-arrow-up"></i> +5.2%</div>
                    </div>
                </div>
            </div>

            <div class="charts-row">
                <div class="card">
                    <div class="card-header"><h3>Task Throughput</h3><span class="subtitle">Last 7 days</span></div>
                    <div class="chart-container" id="taskChart"></div>
                </div>
                <div class="card">
                    <div class="card-header"><h3>Task Status</h3></div>
                    <div class="chart-container" id="statusChart"></div>
                </div>
            </div>

            <div class="lists-row">
                <div class="card">
                    <div class="card-header"><h3>Recent Endpoints</h3><a href="endpoints.html" class="view-all">View All →</a></div>
                    <div class="list-content">
                        <div class="list-item">
                            <div class="item-icon gpu"><i class="fas fa-microchip"></i></div>
                            <div class="item-info"><div class="item-name">flux-schnell-prod</div><div class="item-meta">RTX 4090 • 8 workers</div></div>
                            <span class="tag running">Running</span>
                        </div>
                        <div class="list-item">
                            <div class="item-icon gpu"><i class="fas fa-microchip"></i></div>
                            <div class="item-info"><div class="item-name">wan21-inference</div><div class="item-meta">A100 80GB • 4 workers</div></div>
                            <span class="tag running">Running</span>
                        </div>
                        <div class="list-item">
                            <div class="item-icon gpu"><i class="fas fa-microchip"></i></div>
                            <div class="item-info"><div class="item-name">lora-trainer</div><div class="item-meta">H100 • 2 workers</div></div>
                            <span class="tag pending">Pending</span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header"><h3>Recent Tasks</h3><a href="tasks.html" class="view-all">View All →</a></div>
                    <div class="list-content">
                        <div class="list-item"><span class="task-id">abc123</span><span class="task-ep">flux-schnell</span><span class="tag running">Running</span><span class="task-time">2s</span></div>
                        <div class="list-item"><span class="task-id">def456</span><span class="task-ep">wan21</span><span class="tag success">Done</span><span class="task-time">12s</span></div>
                        <div class="list-item"><span class="task-id">ghi789</span><span class="task-ep">flux-schnell</span><span class="tag success">Done</span><span class="task-time">18s</span></div>
                        <div class="list-item"><span class="task-id">jkl012</span><span class="task-ep">wan21</span><span class="tag failed">Failed</span><span class="task-time">25s</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const taskChart = echarts.init(document.getElementById('taskChart'));
        taskChart.setOption({
            grid: { left: 50, right: 20, top: 20, bottom: 30 },
            tooltip: { trigger: 'axis' },
            xAxis: { type: 'category', data: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], axisLabel: { color: '#6b7280' } },
            yAxis: { type: 'value', axisLabel: { color: '#6b7280', formatter: v => (v/1000)+'k' } },
            series: [
                { name: 'Completed', type: 'bar', stack: 'a', data: [48000,52000,49000,55000,58000,62000,54000], itemStyle: { color: '#48bb78' }, barMaxWidth: 30 },
                { name: 'Failed', type: 'bar', stack: 'a', data: [120,85,150,95,110,78,102], itemStyle: { color: '#f56565' } }
            ]
        });

        const statusChart = echarts.init(document.getElementById('statusChart'));
        statusChart.setOption({
            tooltip: { trigger: 'item' },
            series: [{
                type: 'pie', radius: ['45%','70%'],
                label: { show: false },
                data: [
                    { value: 54678, name: 'Completed', itemStyle: { color: '#48bb78' } },
                    { value: 156, name: 'Running', itemStyle: { color: '#1da1f2' } },
                    { value: 89, name: 'Pending', itemStyle: { color: '#f59e0b' } },
                    { value: 39, name: 'Failed', itemStyle: { color: '#f56565' } }
                ]
            }]
        });

        window.addEventListener('resize', () => { taskChart.resize(); statusChart.resize(); });
    </script>
</body>
</html>
